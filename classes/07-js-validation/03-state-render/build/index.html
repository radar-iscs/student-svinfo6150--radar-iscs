<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Prez</title>

    <meta name="description" content="-- DESCRIPTION HERE --">
    <meta name="author" content="swiftone">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="css/highlight/styles/zenburn.css" id="highlight-theme">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <link rel="stylesheet" href="css/custom.css">

  </head>

  <body>

    <div class="reveal">
      <div class="slides"><section id="chapter-state" class="chapter">
<section id="state-intro" class="slide" data-has-notes="false">
<h1>The State-Render Cycle</h1><ul>
<li>We react to events</li>
<li>We read form fields (as needed)</li>
<li>Use <code>.classList</code> to change classes on elements</li>
<li>Use <code>.innerText</code>/<code>.innerHTML</code> to change text/HTML</li>
</ul>
<p>This works, but:</p>
<ul>
<li>HTML/text/classes scattered among HTML &amp; JS</li>
<li>Grows more complex as app grows</li>
<li>Too complex at large sizes</li>
</ul>
<p>Addressed by <strong>state-render cycle</strong></p>
</section>

<section id="state-state" class="slide" data-has-notes="false">
<h1>What is &quot;State&quot;</h1><ul>
<li>Everything about your app that can change</li>
<li>Think a vending machine<ul>
<li>Tracks how much money you&#39;ve put in (state)</li>
<li>Has a limited number of ways it can change</li>
</ul>
</li>
<li>Web apps have state<ul>
<li>Values entered into form fields</li>
<li>Changing concepts based on &quot;clicks&quot;<ul>
<li>Ex: &quot;open&quot;, &quot;hidden&quot;, &quot;selected&quot;</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>

<section id="state-loop" class="slide" data-has-notes="false">
<h1>Core State-Render loop</h1><ul>
<li>App has variables for current state</li>
<li>Events can change state values<ul>
<li>State changes trigger <strong>render</strong></li>
</ul>
</li>
<li>&quot;render&quot; <strong>replaces</strong> HTML chunk<ul>
<li>New HTML is based on current state</li>
</ul>
</li>
</ul>
</section>
</section>

<section id="chapter-simple-example" class="chapter">
<section id="simple-example-example" class="slide" data-has-notes="false">
<h1>Simple state-render example</h1><pre><code class="lang-js"><span class="hljs-keyword">const</span> contentEl = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content'</span>);
<span class="hljs-keyword">const</span> catNames = [<span class="hljs-string">'Jorts'</span>, <span class="hljs-string">'Jean'</span>, <span class="hljs-string">'Nyancat'</span>, ];
<span class="hljs-keyword">let</span> catNum = <span class="hljs-number">0</span>;
render();

contentEl.addEventListener(<span class="hljs-string">'click'</span>, (e) =&gt; {
  <span class="hljs-keyword">if</span>(!e.target.classList.contains(<span class="hljs-string">'change-cat'</span>)) {
    <span class="hljs-keyword">return</span>;
  }
  catNum = catNum &lt; (catNames.length - <span class="hljs-number">1</span>) ? catNum + <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
  render();
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
  contentEl.innerHTML = <span class="hljs-string">`
    &lt;div&gt;Your cat is <span class="hljs-subst">${catNames[catNum]}</span>&lt;/div&gt;
    &lt;button class="change-cat" type="button"&gt;Next&lt;/button&gt;
  `</span>;
}
</code></pre>
</section>

<section id="simple-example-explain-example" class="slide" data-has-notes="false">
<h1>Explaining the simple example</h1><ul>
<li>Our state is <code>catNum</code></li>
<li>User actions can change state<ul>
<li>+1 to catNum, wrap around to 0</li>
</ul>
</li>
<li>When state changes, we call <code>render()</code></li>
<li><code>render()</code> replaces innerHTML of <code>.content</code></li>
</ul>
</section>

<section id="simple-example-differences" class="slide" data-has-notes="false">
<h1>Differences when using state-render</h1><ul>
<li>We replace a chunk of HTML<ul>
<li>In extreme cases, entire <code>&lt;body&gt;</code> contents</li>
</ul>
</li>
<li>Write HTML with or without classes<ul>
<li>Instead of <code>.classList.add/remove/toggle</code></li>
</ul>
</li>
<li>Attach event listener to ancestor<ul>
<li>Possibly listen for multiple events</li>
<li>Make sure event is on correct element!</li>
</ul>
</li>
</ul>
</section>
</section>

<section id="chapter-more-example" class="chapter">
<section id="more-example-more" class="slide" data-has-notes="false">
<h1>An example of removing/adding elements</h1><pre><code class="lang-js"><span class="hljs-keyword">const</span> contentEl = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content'</span>);
<span class="hljs-keyword">let</span> showExample = <span class="hljs-literal">false</span>;
render();

contentEl.addEventListener(<span class="hljs-string">'click'</span>, (e) =&gt; {
  <span class="hljs-keyword">if</span>(!e.target.classList.contains(<span class="hljs-string">'toggle'</span>)) {
    <span class="hljs-keyword">return</span>;
  }
  showExample = !showExample;
  render();
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
  contentEl.innerHTML = <span class="hljs-string">`
    <span class="hljs-subst">${ showExample ? <span class="hljs-string">"&lt;div&gt;Some Text&lt;/div&gt;"</span> : <span class="hljs-string">""</span> }</span>
    &lt;button 
      class="toggle" 
      type="button"
    &gt;<span class="hljs-subst">${showExample ? <span class="hljs-string">"Hide"</span> : <span class="hljs-string">"Show"</span>}</span>&lt;/button&gt;
  `</span>;
}
</code></pre>
</section>

<section id="more-example-hide-explain" class="slide" data-has-notes="false">
<h1>Important element things to notice</h1><ul>
<li>The <code>&lt;div&gt;</code> is present when <code>showExample === true</code><ul>
<li>And not otherwise</li>
<li>Not hidden with CSS</li>
</ul>
</li>
<li>The <code>&lt;button&gt;</code> text changes</li>
<li>All elements are replaced on each <code>render()</code><ul>
<li>Even if nothing changed</li>
<li>Can&#39;t listen for clicks on the button!<ul>
<li>Different <code>&lt;button&gt;</code> each render!</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>

<section id="more-example-class-example" class="slide" data-has-notes="false">
<h1>An example with class names</h1><pre><code class="lang-js"><span class="hljs-keyword">const</span> contentEl = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content'</span>);
<span class="hljs-keyword">let</span> isActive = <span class="hljs-literal">false</span>;
render();

contentEl.addEventListener(<span class="hljs-string">'click'</span>, (e) =&gt; {
  <span class="hljs-keyword">if</span>(!e.target.classList.contains(<span class="hljs-string">'activator'</span>)) {
    <span class="hljs-keyword">return</span>;
  }
  isActive = !isActive;
  render();
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
  contentEl.innerHTML = <span class="hljs-string">`
    &lt;div class="example <span class="hljs-subst">${isActive ? <span class="hljs-string">'active'</span> : <span class="hljs-string">''</span>}</span>" &gt;
      Example
    &lt;/div&gt;
    &lt;button class="activator" type="button" &gt;Toggle&lt;/button&gt;
  `</span>;
}
</code></pre>
</section>

<section id="more-example-explain-class" class="slide" data-has-notes="false">
<h1>Important class name things to notice</h1><ul>
<li>The class attribute changes!<ul>
<li>Always <code>example</code></li>
<li>Sometimes <code>active</code></li>
<li>Not using <code>.classList</code></li>
</ul>
</li>
</ul>
</section>
</section>

<section id="chapter-why" class="chapter">
<section id="why-overview" class="slide" data-has-notes="false">
<h1>Why use the state-render cycle?</h1><p>Pros: </p>
<ul>
<li>HTML in one place<ul>
<li>Class names changes in HTML (one place)</li>
</ul>
</li>
<li>Scales better as app gets more complex</li>
</ul>
<p>Cons:</p>
<ul>
<li>Many elements are replaced<ul>
<li>Often without change</li>
<li>Can cause problems with form fields</li>
</ul>
</li>
<li>Must use event delegation to listen for events</li>
</ul>
</section>

<section id="why-react" class="slide" data-has-notes="false">
<h1>A Particular Note</h1><p>React is a fancy, easier, more efficient version</p>
<ul>
<li>We will define <strong>components</strong> <ul>
<li>These output chunks of HTML</li>
<li>That are replaced/changed </li>
<li>Output is based on state changes</li>
<li>State changes when <strong>events</strong> happen</li>
</ul>
</li>
<li>We aren&#39;t using React YET<ul>
<li>But we CAN use state-render without React</li>
</ul>
</li>
</ul>
</section>

<section id="why-requirements" class="slide" data-has-notes="false">
<h1>What are you required to do?</h1><p>This section of course does NOT require state-render</p>
<ul>
<li>Can select elements<ul>
<li>Update their classes/text</li>
</ul>
</li>
<li>OR you can select ancestors<ul>
<li>Replace chunks of HTML <ul>
<li>Including class names</li>
</ul>
</li>
</ul>
</li>
<li>Both solutions used on jobs</li>
</ul>
<p>Our unit 3 will use React which does this for you</p>
<ul>
<li>Easier to understand with early practice</li>
</ul>
</section>

<section id="why-state" class="slide" data-has-notes="false">
<h1>Complex decisions MUST use state!</h1><ul>
<li>If you are changing any values<ul>
<li>AND need to make decision</li>
<li>Have variables that track current situation<ul>
<li>This is <strong>state</strong></li>
</ul>
</li>
</ul>
</li>
<li>NEVER read text/classes of HTML to decide<ul>
<li>This is a proven source of pain</li>
</ul>
</li>
<li>More than <code>.classList.add/remove/toggle</code>?<ul>
<li>Should track current situation in variable</li>
</ul>
</li>
</ul>
</section>
</section>

<section id="chapter-partial" class="chapter">
<section id="partial-intro" class="slide" data-has-notes="false">
<h1>Partially Replacing HTML</h1><p>Sometimes you don&#39;t want to replace entire HTML</p>
<ul>
<li>Exact element may be important<ul>
<li>Example: Form fields complex to replace</li>
</ul>
</li>
</ul>
<p>In these cases you can partially replace the HTML</p>
</section>

<section id="partial-example-html" class="slide" data-has-notes="false">
<h1>Example HTML</h1><pre><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blah-blah-blah"</span>&gt;</span>
       /* blah blah blah */
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"register"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span="example-label"</span>&gt;</span>Example:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"example-field"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error error--example"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"register__submit"</span>&gt;</span>Register<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre><ul>
<li>We can fully replace <code>blah-blah-blah</code></li>
<li>We want to leave form content in place</li>
<li>Except to change <code>error--example</code></li>
</ul>
</section>

<section id="partial-render" class="slide" data-has-notes="false">
<h1>You decide what your <code>render</code> replaces</h1><p>(Or whatever you call the function)</p>
<p>Point is to update HTML based on current state</p>
<ul>
<li>NOT based on just-happened action/event</li>
<li>How you update HTML isn&#39;t the vital part</li>
</ul>
</section>
</section>

<section id="chapter-summary" class="chapter">
<section id="summary-state" class="slide" data-has-notes="false">
<h1>Summary - State</h1><ul>
<li>Using variables to track current decisions<ul>
<li>Can be different keys in a state object</li>
<li>Allows new decisions based on previous</li>
</ul>
</li>
<li>Prevents code from growing needlessly complex</li>
</ul>
</section>

<section id="summary-render" class="slide" data-has-notes="false">
<h1>Summary - Render</h1><ul>
<li><code>render()</code> is just a name<ul>
<li>Could be any name</li>
<li>Can have many functions</li>
</ul>
</li>
<li>Creates/replaces HTML based on state</li>
<li>Keeps HTML/class names in one place</li>
<li>Often requires event delegation</li>
</ul>
</section>

<section id="summary-using-state-render" class="slide" data-has-notes="false">
<h1>Summary - Using State-Render Cycle</h1><ul>
<li>Have state variables</li>
<li>Listen on ancestor for events<ul>
<li>Filter out irrelevant events</li>
<li>Change state as user indicates</li>
<li>Call a render-style function</li>
</ul>
</li>
<li>Render-style functions replace block(s) of HTML<ul>
<li>Write HTML contents based on state</li>
<li>Write HTML class names based on state</li>
<li>Can fully replace rather than change<ul>
<li>Usually but not always easier to replace</li>
</ul>
</li>
</ul>
</li>
<li>DO NOT use unsanitized user data in output</li>
</ul>
</section>
</section></div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: Reveal.getQueryHash().transition || 'slide', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [
        //{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
    </script>

    <script src="js/dynamic-theme.js"></script><script src="js/custom.js"></script>

  </body>
</html>
